---
layout: default
title: 카테고리
permalink: /categories/
---
<div class="home py-4 py-md-5">
  <h1 class="title" style="text-align: center;"></h1>
  <hr/>
  <div id="postsList" class="row">
  </div>
</div> 
<div class="row justify-content-center">
  <div class="col-md-4">
    <ul class="pagination">
    </ul>
  </div>
</div>
<script src="/js/PagingUtil.js"></script>
<script>
  //스크립트 정리 필요, 검색 기능 추가 여지 있음.
  //검색 기능은 나중에 필요해지면 그 때 추가하던지 할 예정.


  var div = window.location.hash.indexOf('?');
  var categoryName = decodeURI(window.location.hash.substr(1, div-1));
  var viewPostsNum = 6;
  var pageNum = parseInt(window.location.hash.substr(div+1));



  axios.get('/posts.json')
    .then(function (response) {
      var postsList = [];
      for(var i in response.data.posts){
        var posts = response.data.posts[i];
        var categories = posts.categories[0];

        if( categories === window.categoryName ){
          postsList.push(posts);
        }
      }

      $('.title').val(categoryName);
      var totalPostsNum = postsList.length;
      var pagingUtil = new PagingUtil(pageNum, totalPostsNum);
      pagination(pagingUtil);

      printPostsList(postsList);
    }).catch(function (error) {
      console.log(error);
    });
    function pagination(pagingUtil){
      var html = '';
      html +=`<li class="page-item ${pagingUtil.isPrev? 'active': 'disabled'}">`;
      html +=`<a class="page-link" href="/categories#${categoryName}?${(pagingUtil.pageNum-1)}">Previous</a>`;
      html +='</li>';
      for(var i = 1; i <= pagingUtil.totalPageNum; i++){
        html +=`<li class="page-item ${i == pagingUtil.pageNum? 'active': ''}">`;
        html +=`<a class="page-link" href="/categories#${categoryName}?${i}">${i}</a>`;
        html +='</li>';
      }
      html +=`<li class="page-item ${pagingUtil.isNext? 'active': 'disabled'}">`;
      html +=`<a class="page-link" href="/categories#${categoryName}?${(pagingUtil.pageNum+1)}">Next</a>`;
      html +='</li>';

      $('.pagination').append(html);
    }
    function printPostsList(postsList){
      var show = 6 * (pageNum - 1);
      for(var i = 0+show; i < 6+show; i++){
        var posts = postsList[i];

        var html = "";
        html += '<div class="col-12 col-md-6 col-lg-4">';
          html += `<a href="${posts.url}" class="index-anchor">`;
              html += '<div class="card rounded overflow-hidden">';
                  html += '<div class="image">';
                  if( posts.image ){
                      html += `<img src="${posts.image}" alt="${posts.title} 이미지" >`;
                  }
                  html += '<div class="card-body">';
                      html += `<h3 class="panel-title font-weight-bold">${posts.title}</h3>`;
                      html += `<p class="p-0 my-1 mx-0"><span class="post-meta"><small>${posts.date}</small></span></p>`;
                      html += `<p>${posts.content}</p>`;
                      html += '</div>';
                  html += '</div>';
              html += '</div>';
          html += '</a>';
        html += '</div>';

        $('#postsList').append(html);
      }
    }
  function get_query(){
      var url = document.location.href;
      var qs = url.substring(url.indexOf('?') + 1).split('&');
      for(var i = 0, result = {}; i < qs.length; i++){
          qs[i] = qs[i].split('=');
          result[qs[i][0]] = decodeURIComponent(qs[i][1]);
      }
      return result;
  }
</script>